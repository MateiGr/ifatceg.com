{% assign width = 560 %}
{% assign height = 315 %}
{% assign paddingBottom = height | divided_by: width | times: 100 %}
<div class="video-holder" style="padding-bottom: {{ paddingBottom }}%; position: relative;">
  <video width="{{ width }}" height="{{ height }}" controls style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);" id="video-preview">
    <source src="{{ include.url }}" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</div>

<script>
  const videoElement = document.getElementById('video-preview');

  videoElement.addEventListener('loadedmetadata', function() {
    videoElement.currentTime = 0; // Set the video to the beginning
    videoElement.addEventListener('seeked', function() {
      const canvas = document.createElement('canvas');
      canvas.width = {{ width }};
      canvas.height = {{ height }};
      const ctx = canvas.getContext('2d');
      ctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);
      const dataURL = canvas.toDataURL('image/png');
      videoElement.style.backgroundImage = 'url(' + dataURL + ')';
      videoElement.style.backgroundSize = 'cover';
      canvas.remove();
    });
  });
</script>
