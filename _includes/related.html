{% assign first_tag = page.tags | first %}

{% assign related_posts = site.posts | where_exp: "post", "(post.tags.first == first_tag) and (post.url != page.url)" | limit: 5 %}

{% if related_posts.size > 0 %}
<div class="related-posts">
  <h3>Related posts about "{{ first_tag }}":</h3>
  <ul>
    {% for post in related_posts %}
      <li><a href="{{ post.url }}">{{ post.title }}</a></li>
    {% endfor %}
  </ul>
</div>
{% endif %}
